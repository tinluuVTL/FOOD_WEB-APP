

products = [
    {
        brand_name: "Haldiram",
        soldby: "Haldiram",
        img: "https://pbs.twimg.com/media/E_aqVBGVQAIMvK0.jpg",
        price: 100,
        discount: 50,
        oldprice: 200,
        productdetails: "Choley (Chana) and Bhatura (Fried Flour Bread)<br> Also have many Spices to make the taste better.",
        productword: "Choley Bhatura"
    },
    {
        brand_name: "Bikanerwala",
        soldby: "Bikanerwala",
        img: "https://www.bigbasket.com/media/uploads/p/l/800365840_1-bikaner-sweets-and-namkeen-samosa.jpg",
        price: 100,
        discount: 50,
        oldprice: 100,
        productdetails: "Fried Flour Traingles with some mint sauce and Coriander leafs seasoning.",
        productword: "Samosa"
    },

    {
        brand_name: "KFC",
        soldby: "KFC",
        img: "https://pngimg.com/uploads/kfc_food/kfc_food_PNG27.png",
        price: 420,
        discount: 20,
        oldprice: 600,
        productdetails: "Fried Chicken Bone Pieces with two Mayonnaise Dips and Coke.",
        productword: "Chicken Wings Bucket"
    },
    {
        brand_name: "Subway",
        soldby: "Subway",
        img: "https://speakingaloud.in/wp-content/uploads/2021/02/Sandwich-Sub.jpg",
        price: 350,
        discount: 30,
        oldprice: 500,
        productdetails: "Garlic Bread with Chicken and 4 sauces that give you a tangy taste.",
        productword: "Garlic Bread Chicken Sub"
    },
    {
        brand_name: "Burger King",
        soldby: "Burger King",
        img: "https://lh3.googleusercontent.com/YhpKnlt-rYAecrHmXzyVFEqDidhn7M9hd_mRaAg0F0Vt6acplJJLiIEg6Aw4U2-uW6mMI5O5OMpzip3hHWyLB2aaSDs=w512-rw",
        price: 119,
        discount: 35,
        oldprice: 300,
        productdetails: "Its Zinger Burger that comes with Mayonnaise and two patties.<br> And top of that you get Veggies.",
        productword: "Veg Zinger Burger"
    },
    {
        brand_name: "Bikanerwala",
        soldby: "Bikanerwala",
        img: "https://media-cdn.tripadvisor.com/media/photo-s/12/66/66/61/papri-chaat.jpg",
        price: 180,
        discount: 10,
        oldprice: 199,
        productdetails: "Papdi Chaat which consists of Curd, Fried papad, Many seasonings to make its taste better.",
        productword: "Papdi Chaat"
    },
    {
        brand_name: "Haldiram",
        soldby: "Haldiram",
        img: "https://www.secondrecipe.com/wp-content/uploads/2017/08/rajma-chawal-1.jpg",
        price: 1399,
        discount: 30,
        oldprice: 100,
        productdetails: "It consists of boiled beans and tomato purey that have the twist of many ingredients.",
        productword: "Rajma Chawal"
    },
    {
        brand_name: "Burger King",
        soldby: "Burger King",
        img: "https://imageio.forbes.com/specials-images/imageserve/602c7d25888834de668f8a76/Burger-King-s-new-chicken-sandwich/960x0.jpg?format=jpg&width=960",
        price: 449,
        discount: 15,
        oldprice: 200,
        productdetails: "It have two buns and between them you will get a thick piece of boneless Chicken with some mayonnaise and lettece.",
        productword: "Big Chick Burger"
    },
    {
        brand_name: "KFC",
        soldby: "KFC",
        img: "https://i.ytimg.com/vi/dQP7OHrMY4c/maxresdefault.jpg",
        price: 449,
        discount: 20,
        oldprice: 399,
        productdetails: "It have two buns which consists of veggies and allo patty.",
        productword: "Single Chicken Burger"
    },
    {
        brand_name: "Subway",
        soldby: "Subway",
        img: "https://i.ytimg.com/vi/FnwW9tvTM40/maxresdefault.jpg",
        price: 449,
        discount: 30,
        oldprice: 200,
        productdetails: "Its bread is a Multi-Grain bread. It consists veggies of your choice as well as sauces also.",
        productword: "Multigrain Veg Sub"
    },
    {
        brand_name: "KFC",
        soldby: "KFC",
        img: "https://content.jdmagicbox.com/comp/chennai/x3/044pxx44.xx44.130523172744.l8x3/catalogue/kfc-restaurant-velacheri-chennai-inexpensive-restaurants-below-rs-500-4gqpo2t.jpg?clr=5749f",
        price: 629,
        discount: 10,
        oldprice: 199,
        productdetails: "Its a veg wrap which consists of two veg aloo patties, sauces and veggies.",
        productword: "Veg Rolls"
    },
    {
        brand_name: "Subway",
        soldby: "Subway",
        img: "https://www.cookiemadness.net/wp-content/uploads/2020/05/actualsubway.jpg",
        price: 1199,
        discount: 70,
        oldprice: 100,
        productdetails: "It is a Chocolate Chip Cookie which you'll get free of cost if purchased with combo.",
        productword: "Chocolate Chip Cookie"
    },
    {
        brand_name: "Bikanerwala",
        soldby: "Bikanerwala",
        img: "https://pbs.twimg.com/media/D9g9P5NVUAAtCks.jpg",
        price: 800,
        discount: 30,
        oldprice: 200,
        productdetails: "This Raj Kachori consists of one big frid ball in which we make a hole and put much spices with curd.",
        productword: "Raj Kachori"
    },
    {
        brand_name: "Haldiram",
        soldby: "Haldiram",
        img: "https://www.muzaffarpureshop.com/wp-content/uploads/2019/08/samosa-chat-recipe.jpg",
        price: 792,
        discount: 40,
        oldprice: 100,
        productdetails: "It consists of Two Samosas dipped into Chickpeas Gravy(Choley) and served with Green Mint Sauce and curd.",
        productword: "Choley Samosey"
    },
    {
        brand_name: "Burger King",
        soldby: "Burger King",
        img: "https://burgerking-image.s3.amazonaws.com/products/Home/ml/2x_ml_20210510124442782188_262x360jpg",
        price: 629,
        discount: 30,
        oldprice: 399,
        productdetails: "Its a Double Patty Veg Burger which will be served with fries and drink of your choice.",
        productword: "Double Patty Veg Burger with Fries"
    },
]



if (JSON.parse(localStorage.getItem("products")) == null) {
    localStorage.setItem("products", JSON.stringify(products))
}

function showProducts(d) {
    let products = d;

    products.forEach(function (el) {
        appendProduct(el);
    })
}

function appendProduct(el) {
    let catalogue = document.getElementById('products-right');

    let div = document.createElement("div")

    // console.log(el);

    div.addEventListener("click", function () {
        localStorage.setItem("clickedProduct", JSON.stringify(el))
    })

    div.innerHTML = `<a class="each-product" href="moda.html"
              ><div>
                <img
                  src= ${el.img}
                  alt=""
                />
                <div class="brand">${el.brand_name}</div>
                
                <div class="price">
                 Rs. ${Math.ceil(el.oldprice * (100 - el.discount) / 100)} <span class="line-through">Rs. ${el.oldprice}</span>
                  <span class="discount">(${el.discount}% OFF)</span>
                </div>
              </div></a
            >`
    // console.log(div)



    catalogue.append(div)
}

showProducts(JSON.parse(localStorage.getItem("products")))



function sort() {
    let menu = document.getElementById("type");
    menu.addEventListener("change", generateData);

    function generateData(event) {
        if (menu.value == '1') {
            let products = JSON.parse(localStorage.getItem("products"))
            let catalogue = document.getElementById('products-right');
            catalogue.innerHTML = null;

            products = products.sort(function (a, b) {
                return b.price - a.price
            });

            showProducts(products);
        } else if (menu.value == '2') {
            let products = JSON.parse(localStorage.getItem("products"))
            let catalogue = document.getElementById('products-right');
            catalogue.innerHTML = null;

            products = products.sort(function (a, b) {
                return a.price - b.price
            });

            showProducts(products);
        } else if (menu.value == '3') {
            let products = JSON.parse(localStorage.getItem("products"))
            let catalogue = document.getElementById('products-right');
            catalogue.innerHTML = null;

            products = products.sort(function (a, b) {
                return b.discount - a.discount
            });

            showProducts(products);
        }
        else if (menu.value == '4') {
            let products = JSON.parse(localStorage.getItem("products"))
            let catalogue = document.getElementById('products-right');
            catalogue.innerHTML = null;

            showProducts(products);
        }
    }
}
sort();

function filter(x) {
    let products = JSON.parse(localStorage.getItem("products"))

    products = products.filter(function (el) {
        return el.brand_name == x;
    })

    let catalogue = document.getElementById('products-right');
    catalogue.innerHTML = null;
    showProducts(products);
}

function priceFilter(x, y) {
    let products = JSON.parse(localStorage.getItem("products"))

    products = products.filter(function (el) {
        return el.price < x && el.price > y;
    })

    let catalogue = document.getElementById('products-right');
    catalogue.innerHTML = null;
    showProducts(products);
}